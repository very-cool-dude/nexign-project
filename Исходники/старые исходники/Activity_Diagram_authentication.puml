@startuml
title: Activity Diagram: Авторизация

start
:Выбор типа пользователя (абонент / менеджер);
if (Тип = Абонент?) then (Да)
  :Ввод номера телефона;
  :Проверка корректности номера;

  if (Формат номера верен?) then (Да)
    :Запрос к БД BRT (таблица clients);
    if (Абонент найден?) then (Да)
      :Авторизация успешна;
      stop
    else (Нет)
      :Ошибка: Абонент не найден;
      end
    endif
  else (Нет)
    :Ошибка: Некорректный номер;
    end
  endif
else (Нет)
  :Ввод логина и пароля;
  :Проверка корректности ввода;

  if (Формат данных валиден?) then (Да)
    :Запрос к БД CRM (таблица users);
    if (Менеджер найден?) then (Да)
      :Сравнение логина и пароля;
      if (Данные совпадают?) then (Да)
        :Авторизация успешна;
        stop
      else (Нет)
        :Ошибка: Неверный логин или пароль;
        end
      endif
    else (Нет)
      :Ошибка: Менеджер не найден;
      end
    endif
  else (Нет)
    :Ошибка: Некорректные данные;
    end
  endif
endif
@enduml